"use strict";var __assign=function(){return(__assign=Object.assign||function(i){for(var o,r=1,l=arguments.length;r<l;r++)for(var a in o=arguments[r])Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a]);return i}).apply(this,arguments)},formatChartData_1=(exports.__esModule=!0,exports.drawCockroachWay=exports.drawSmallWay=exports.drawBigEyeWay=exports.drawBigWay=exports.drawDishWay=exports.drawDiagonalLine=exports.drawHollowCircle=exports.drawSolidCircle=exports.drawText=exports.drawGrid=exports.getBullseye=void 0,require("./formatChartData"));function getBullseye(i){var o=i.row,r=i.column,l=i.origin,a=i.cellWidth,i=i.cellHeight;return[r*a+a/2+l[0],o*i+i/2+l[1]]}function drawGrid(i,o){for(var r=o.rows,l=o.columns,a=o.lineColor,t=o.origin,e=o.lineWidth,n=void 0===e?1:e,s=o.cellWidth,c=o.cellHeight,d=o.skipOddLine,h=s*l+n,g=c*r+n,f=0;f<=l;f++){var w=f*s+t[0];f%2&&d||(i.beginPath(),i.lineWidth=n,i.strokeStyle=a,i.moveTo(w,Math.floor(t[1])),i.lineTo(w,Math.floor(g+t[1])),i.stroke())}for(f=0;f<=r;f++){var y=f*c+t[1];f%2&&d||(i.beginPath(),i.lineWidth=1,i.strokeStyle=a,i.moveTo(Math.floor(t[0]),y),i.lineTo(Math.floor(t[0]+h),y),i.stroke())}}function drawText(i,o){var r=o.x,l=o.y,a=o.text,t=o.color,e=o.fontSize,n=o.fontFamily,n=void 0===n?"Microsoft YaHei":n,o=o.fontWeight,o=void 0===o?400:o;i.beginPath(),i.font="".concat(o," ").concat(e," ").concat(n),i.fillStyle=t,i.textAlign="center",i.textBaseline="middle",i.fillText(a,r,l),i.stroke()}function drawSolidCircle(i,o){var r=o.x,l=o.y,a=o.color,o=o.radius;i.beginPath(),i.fillStyle=a,i.arc(r,l,o,0,360,!1),i.fill()}function drawHollowCircle(i,o){var r=o.x,l=o.y,a=o.color,t=o.radius,e=o.fillColor,o=o.lineWidth,o=void 0===o?1:o;i.beginPath(),i.lineWidth=o,i.fillStyle=e,i.strokeStyle=a,i.arc(r,l,t,0,360,!1),i.fill(),i.stroke()}function drawDiagonalLine(i,o){var r=o.color,l=o.offset,l=void 0===l?1:l,a=o.lineCap,a=void 0===a?"butt":a,t=o.lineWidth,t=void 0===t?1:t,e=o.bottomLeftX,n=o.bottomLeftY,s=o.topRightX,o=o.topRightY;e+=l,n-=l,s-=l,o+=l,i.beginPath(),i.lineCap=a,i.lineWidth=t,i.strokeStyle=r,i.moveTo(e,n),i.lineTo(s,o),i.stroke()}function drawDishWay(s,i,o,c){void 0===c&&(c=[0,0]);var r=((i=(0,formatChartData_1.dishWay)(i,o.rows))[i.length-1]||[]).filter(Boolean),d=o.lineWidth,h=o.cellWidth,g=o.cellHeight,f=o.textMap,w=o.colorMap,l=[d/2,d/2],i=1===r.length&&r[0].inquiry?i.slice(-o.columns):i.slice(-(o.columns-1));c[0]+=l[0],c[1]+=l[1],drawGrid(s,__assign(__assign({},o),{origin:c})),i.forEach(function(i,n){i.forEach(function(i,o){var r,l,a,t,e;i&&(e=(o=getBullseye({row:o,column:n,origin:c,cellWidth:h,cellHeight:g}))[0],o=o[1],a=f[i.winner],l=w[i.winner],r=Math.floor((h-d)/2),drawSolidCircle(s,{x:e,y:o,color:l,radius:r}),drawText(s,{x:e,y:o,text:a,color:"#fff",fontSize:"".concat(h/2+2,"px")}),"0"!==i.pair&&(l={color:"#fff",radius:3},a=e+Math.sin(2*Math.PI/360*315)*r,t=o-Math.cos(2*Math.PI/360*315)*r,e=e+Math.sin(2*Math.PI/360*135)*r,o=o-Math.cos(2*Math.PI/360*135)*r,"1"===i.pair&&drawHollowCircle(s,__assign(__assign({},l),{x:a,y:t,fillColor:w.banker})),"2"!==i.pair&&drawHollowCircle(s,__assign(__assign({},l),{x:a,y:t,fillColor:w.banker})),drawHollowCircle(s,__assign(__assign({},l),{x:e,y:o,fillColor:w.player}))))})}),s.closePath()}function drawBigWay(d,i,o,h){void 0===h&&(h=[0,0]);var r=((i=(0,formatChartData_1.bigWay)(i,o.rows))[i.length-1]||[]).filter(Boolean),l=o.lineWidth,g=o.cellWidth,f=o.cellHeight,w=o.colorMap,l=[l/2,l/2],i=1===r.length&&r[0].inquiry?i.slice(-o.columns):i.slice(-(o.columns-1));h[0]+=l[0],h[1]+=l[1],drawGrid(d,__assign(__assign({},o),{origin:h})),i.forEach(function(i,c){i.forEach(function(i,o){var r,l,a,t,e,n,s;i&&(r=(l=getBullseye({row:o,column:c,origin:h,cellWidth:g,cellHeight:f}))[0],l=l[1],a=w[i.winner],drawHollowCircle(d,{x:r,y:l,color:a,radius:a=(g-2)/2,fillColor:"transparent",lineWidth:1}),"0"!==i.pair&&(n={color:"#fff",radius:1.5},t=r+Math.sin(2*Math.PI/360*315)*a,e=l-Math.cos(2*Math.PI/360*315)*a,s=r+Math.sin(2*Math.PI/360*135)*a,a=l-Math.cos(2*Math.PI/360*135)*a,"1"===i.pair&&drawHollowCircle(d,__assign(__assign({},n),{x:t,y:e,fillColor:w.banker})),"2"!==i.pair&&drawHollowCircle(d,__assign(__assign({},n),{x:t,y:e,fillColor:w.banker})),drawHollowCircle(d,__assign(__assign({},n),{x:s,y:a,fillColor:w.player}))),1===i.tieCount?(t=c*g+h[0],e=(o+1)*f+h[1],n=(c+1)*g+h[0],s=o*g+h[1],drawDiagonalLine(d,{color:w.tie,bottomLeftX:t,bottomLeftY:e,topRightX:n,topRightY:s})):1<i.tieCount&&drawText(d,{x:r,y:l,text:String(i.tieCount),color:w.tie,fontSize:"7px"}))})}),d.closePath()}function drawBigEyeWay(a,i,o,t){void 0===t&&(t=[0,0]);var r=((i=(0,formatChartData_1.bigEyeWay)(i,o.rows))[i.length-1]||[]).filter(Boolean),l=o.lineWidth,e=o.cellWidth,n=o.cellHeight,s=o.colorMap,c=o.skipOddLine,l=[l/2,l/2],i=1===r.length&&r[0].inquiry?i.slice(-o.columns):i.slice(-(o.columns-1));t[0]+=l[0],t[1]+=l[1],drawGrid(a,__assign(__assign({},o),{origin:t,skipOddLine:c})),i.forEach(function(i,l){i.forEach(function(i,o){var r;i&&(r=(o=getBullseye({row:o,column:l,origin:t,cellWidth:e,cellHeight:n}))[0],o=o[1],i=s[i.winner],drawHollowCircle(a,{x:r,y:o,color:i,radius:(e-2)/2,fillColor:"transparent",lineWidth:1}))})})}function drawSmallWay(a,i,o,t){void 0===t&&(t=[0,0]);var r=((i=(0,formatChartData_1.smallWay)(i,o.rows))[i.length-1]||[]).filter(Boolean),e=o.lineWidth,n=o.cellWidth,s=o.cellHeight,c=o.colorMap,l=o.skipOddLine,d=[e/2,e/2],i=1===r.length&&r[0].inquiry?i.slice(-o.columns):i.slice(-(o.columns-1));t[0]+=d[0],t[1]+=d[1],drawGrid(a,__assign(__assign({},o),{origin:t,skipOddLine:l})),i.forEach(function(i,l){i.forEach(function(i,o){var r;i&&(r=(o=getBullseye({row:o,column:l,origin:t,cellWidth:n,cellHeight:s}))[0],o=o[1],i=c[i.winner],drawSolidCircle(a,{x:r,y:o,color:i,radius:(n-e)/2}))})}),a.closePath()}function drawCockroachWay(e,i,o,n){void 0===n&&(n=[0,0]);var r=((i=(0,formatChartData_1.cockroachWay)(i,o.rows))[i.length-1]||[]).filter(Boolean),l=o.lineWidth,s=o.cellWidth,c=o.cellHeight,d=o.colorMap,a=o.skipOddLine,l=[l/2,l/2],i=1===r.length&&r[0].inquiry?i.slice(-o.columns):i.slice(-(o.columns-1));n[0]+=l[0],n[1]+=l[1],drawGrid(e,__assign(__assign({},o),{origin:n,skipOddLine:a})),i.forEach(function(i,t){i.forEach(function(i,o){var r,l,a;i&&(i=d[i.winner],r=t*s+n[0],l=(o+1)*c+n[1],a=(t+1)*s+n[0],o=o*s+n[1],drawDiagonalLine(e,{color:i,bottomLeftX:r,bottomLeftY:l,topRightX:a,topRightY:o}))})}),e.closePath()}exports.getBullseye=getBullseye,exports.drawGrid=drawGrid,exports.drawText=drawText,exports.drawSolidCircle=drawSolidCircle,exports.drawHollowCircle=drawHollowCircle,exports.drawDiagonalLine=drawDiagonalLine,exports.drawDishWay=drawDishWay,exports.drawBigWay=drawBigWay,exports.drawBigEyeWay=drawBigEyeWay,exports.drawSmallWay=drawSmallWay,exports.drawCockroachWay=drawCockroachWay;